<div class="container-fluid">
  <div class="text-center">
    <h1>Voting app</h1>
  </div>

  @if (vm$ | async; as vm) {
  <h2>Voters and Candidates</h2>

  <div class="row my-5">
    <div class="col">
      <lib-voting-generic-table
        [dataSource$]="votersState$"
        [newRow]="{ name: '', voted: false }"
        title="Voters"
        [displayedColumns]="['name', 'voted']"
        (add)="addVoter($event)"
        (remove)="removeVoter($event)"
        (update)="updateVoter($event)"
      ></lib-voting-generic-table>
    </div>
    <div class="col">
      <lib-voting-generic-table
        [dataSource$]="candidatesState$"
        [newRow]="{ name: '', votes: 0 }"
        title="Candidates"
        [displayedColumns]="['name', 'votes']"
        (add)="addCandidate($event)"
        (remove)="removeCandidate($event)"
        (update)="updateCandidate($event)"
      ></lib-voting-generic-table>
    </div>
  </div>

  <mat-divider></mat-divider>

  <div class="my-5">
    <h2>Vote!</h2>
    <div class="col-4">
      <lib-vote
        [votersState$]="votersState$"
        [candidatesState$]="candidatesState$"
        (updateVoter)="updateVoter($event)"
        (updateCandidate)="updateCandidate($event)"
      ></lib-vote>
    </div>
  </div>
  }
</div>
